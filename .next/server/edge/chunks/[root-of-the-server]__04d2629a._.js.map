{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/supabase/middleware.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { NextResponse, type NextRequest } from \"next/server\";\n\nexport async function updateSession(request: NextRequest) {\n  let supabaseResponse = NextResponse.next({ request });\n\n\n  return supabaseResponse;\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;;AAEO,eAAe,cAAc,OAAoB;IACtD,IAAI,mBAAmB,gMAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;IAGnD,OAAO;AACT"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { updateSession } from \"@/lib/supabase/middleware\";\nimport { type NextRequest, NextResponse } from \"next/server\";\n\nexport async function middleware(request: NextRequest) {\n  const url = request.nextUrl;\n\n  // Prüfe auf Supabase Auth Code (Email-Bestätigung)\n  const code = url.searchParams.get('code');\n  if (code && url.pathname === '/') {\n    const callbackUrl = new URL('/api/auth/callback', request.url);\n    callbackUrl.searchParams.set('code', code);\n    return NextResponse.redirect(callbackUrl);\n  }\n\n  // Prüfe auf Supabase Auth Fehler in URL oder Hash\n  const error = url.searchParams.get('error');\n  const errorCode = url.searchParams.get('error_code');\n  const errorDescription = url.searchParams.get('error_description');\n\n  if (error || errorCode) {\n    const loginUrl = new URL('/auth/login', request.url);\n\n    if (errorCode === 'otp_expired') {\n      loginUrl.searchParams.set('message', 'Der Email-Link ist abgelaufen oder wurde bereits verwendet.');\n      loginUrl.searchParams.set('type', 'error');\n    } else {\n      loginUrl.searchParams.set('message', errorDescription || 'Ein Fehler ist aufgetreten.');\n      loginUrl.searchParams.set('type', 'error');\n    }\n\n    return NextResponse.redirect(loginUrl);\n  }\n\n  return await updateSession(request);\n}\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - images - .svg, .png, .jpg, .jpeg, .gif, .webp\n     * Feel free to modify this pattern to include more paths.\n     */\n    \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\",\n  ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,MAAM,QAAQ,OAAO;IAE3B,mDAAmD;IACnD,MAAM,OAAO,IAAI,YAAY,CAAC,GAAG,CAAC;IAClC,IAAI,QAAQ,IAAI,QAAQ,KAAK,KAAK;QAChC,MAAM,cAAc,IAAI,IAAI,sBAAsB,QAAQ,GAAG;QAC7D,YAAY,YAAY,CAAC,GAAG,CAAC,QAAQ;QACrC,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,kDAAkD;IAClD,MAAM,QAAQ,IAAI,YAAY,CAAC,GAAG,CAAC;IACnC,MAAM,YAAY,IAAI,YAAY,CAAC,GAAG,CAAC;IACvC,MAAM,mBAAmB,IAAI,YAAY,CAAC,GAAG,CAAC;IAE9C,IAAI,SAAS,WAAW;QACtB,MAAM,WAAW,IAAI,IAAI,eAAe,QAAQ,GAAG;QAEnD,IAAI,cAAc,eAAe;YAC/B,SAAS,YAAY,CAAC,GAAG,CAAC,WAAW;YACrC,SAAS,YAAY,CAAC,GAAG,CAAC,QAAQ;QACpC,OAAO;YACL,SAAS,YAAY,CAAC,GAAG,CAAC,WAAW,oBAAoB;YACzD,SAAS,YAAY,CAAC,GAAG,CAAC,QAAQ;QACpC;QAEA,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,MAAM,IAAA,6JAAa,EAAC;AAC7B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;;KAOC,GACD;KACD;AACH"}}]
}